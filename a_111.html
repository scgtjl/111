<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>校园活动信息平台</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.8/dist/chart.umd.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="a2.css" rel="stylesheet">
    <script src="a1.js"></script>
</head>

<body class="font-inter bg-light-1 text-dark">
    <!-- 导航栏 -->
    <header class="fixed w-full top-0 z-50 transition-all duration-300" id="navbar">
        <div class="bg-glass shadow-sm">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between items-center py-4">
                    <div class="flex items-center">
                        <a href="#" class="flex items-center">
                            <div class="h-10 w-10 rounded-lg bg-primary flex items-center justify-center">
                                <i class="fa fa-graduation-cap text-white text-xl"></i>
                            </div>
                            <span class="ml-2 text-xl font-bold text-dark">校园活动<span class="text-primary">信息平台</span></span>
                        </a>
                    </div>

                    <!-- 桌面导航 -->
                    <nav class="hidden md:flex space-x-8">
                        <a href="#" class="text-dark-2 hover:text-primary font-medium transition-custom">首页</a>
                        <a href="#statistics" class="text-dark-2 hover:text-primary font-medium transition-custom">数据统计</a>
                        <a href="#activities" class="text-dark-2 hover:text-primary font-medium transition-custom">活动列表</a>
                        <a href="#about" class="text-dark-2 hover:text-primary font-medium transition-custom">关于我们</a>
                    </nav>

                    <!-- 用户区域 -->
                    <div class="flex items-center">
                        <!-- 未登录状态 -->
                        <div id="notLoggedIn" class="flex items-center">
                            <button id="loginBtn" class="px-4 py-2 text-primary hover:bg-primary/5 rounded-lg transition-custom mr-2">
                                <i class="fa fa-sign-in mr-1"></i>登录
                            </button>
                            <button id="registerBtn" class="px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-custom">
                                <i class="fa fa-user-plus mr-1"></i>注册
                            </button>
                        </div>

                        <!-- 已登录状态 -->
                        <div id="loggedIn" class="hidden relative">
                            <button id="userMenuBtn" class="flex items-center space-x-2 focus:outline-none">
                                <img id="userAvatar" src="https://picsum.photos/40/40?random=1" alt="用户头像" class="h-9 w-9 rounded-full object-cover border-2 border-transparent hover:border-primary transition-custom">
                                <span id="userName" class="hidden md:inline-block text-neutral-700 font-medium"></span>
                                <i class="fa fa-angle-down text-neutral-400"></i>
                            </button>

                            <!-- 用户下拉菜单 -->
                            <div id="userDropdown" class="absolute right-0 mt-2 w-48 bg-white rounded-md shadow-card py-1 z-10 transform origin-top-right scale-95 opacity-0 invisible transition-all duration-200">
                                <a href="b_111.html" class="block px-4 py-2 text-sm text-neutral-700 hover:bg-neutral-100">
                                    <i class="fa fa-user-o mr-2"></i>个人资料
                                </a>

                                <div class="border-t border-neutral-200 my-1"></div>
                                <a href="#" id="logoutBtn" class="block px-4 py-2 text-sm text-red-600 hover:bg-neutral-100">
                                    <i class="fa fa-sign-out mr-2"></i>退出登录
                                </a>
                            </div>
                        </div>
                    </div>

                    <!-- 移动端菜单按钮 -->
                    <div class="md:hidden ml-4">
                        <button id="mobileMenuBtn" class="text-dark hover:text-primary focus:outline-none">
                            <i class="fa fa-bars text-xl"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 移动端导航菜单 -->
        <div id="mobileMenu" class="hidden md:hidden bg-white border-t border-light-2">
            <div class="container mx-auto px-4 py-3 space-y-3">
                <a href="#" class="block py-2 text-dark-2 hover:text-primary font-medium transition-custom">首页</a>
                <a href="#statistics" class="block py-2 text-dark-2 hover:text-primary font-medium transition-custom">数据统计</a>
                <a href="#activities" class="block py-2 text-dark-2 hover:text-primary font-medium transition-custom">活动列表</a>
                <a href="#about" class="block py-2 text-dark-2 hover:text-primary font-medium transition-custom">关于我们</a>
            </div>
        </div>
    </header>

    <main class="pt-16">
        <!-- 英雄区域 -->
        <section class="bg-gradient-blue py-16 md:py-24">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                <div class="max-w-3xl mx-auto text-center text-white">
                    <h1 class="text-[clamp(2rem,5vw,3.5rem)] font-bold mb-6 text-shadow">校园活动信息平台</h1>
                    <p class="text-[clamp(1rem,2vw,1.25rem)] mb-8 opacity-90">发现精彩校园活动，参与其中，拓展人脉，丰富大学生活</p>
                    <div class="flex flex-col sm:flex-row justify-center gap-4">
                        <button id="exploreBtn" class="px-6 py-3 bg-white text-primary rounded-lg font-medium hover:bg-opacity-90 transition-custom shadow-lg">
                            探索活动
                        </button>
                        <button id="statsBtn" class="px-6 py-3 bg-transparent border-2 border-white text-white rounded-lg font-medium hover:bg-white/10 transition-custom">
                            查看数据统计
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- 数据可视化展示页 -->
        <section id="statistics" class="py-16 bg-white">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-12">
                    <h2 class="text-[clamp(1.5rem,3vw,2.5rem)] font-bold text-dark mb-4">活动数据统计</h2>
                    <p class="text-dark-2 max-w-2xl mx-auto">了解校园活动的参与情况和趋势，帮助你更好地参与和组织活动</p>
                </div>

                <!-- 数据选项卡 -->
                <div class="flex flex-wrap justify-center mb-8">
                    <button class="stats-tab px-6 py-3 bg-primary text-white rounded-lg font-medium mr-2 mb-2" data-tab="monthly">
                        月度趋势
                    </button>
                    <button class="stats-tab px-6 py-3 bg-light-2 text-dark-2 rounded-lg font-medium mr-2 mb-2" data-tab="type">
                        活动类型
                    </button>
                    <button class="stats-tab px-6 py-3 bg-light-2 text-dark-2 rounded-lg font-medium mr-2 mb-2" data-tab="college">
                        学院分布
                    </button>
                    <button class="stats-tab px-6 py-3 bg-light-2 text-dark-2 rounded-lg font-medium mb-2" data-tab="popular">
                        热门活动
                    </button>
                </div>

                <!-- 数据图表区域 -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="statsContainer">
                    <!-- 月度趋势图表 -->
                    <div id="monthlyTab" class="stats-content col-span-full bg-white p-6 rounded-xl shadow-card animate-fadeIn">
                        <h3 class="text-lg font-semibold mb-4">月度活动数量趋势</h3>
                        <div class="relative h-80">
                            <canvas id="monthlyChart"></canvas>
                        </div>
                    </div>

                    <!-- 活动类型图表 -->
                    <div id="typeTab" class="stats-content hidden col-span-full bg-white p-6 rounded-xl shadow-card animate-fadeIn">
                        <h3 class="text-lg font-semibold mb-4">活动类型分布</h3>
                        <div class="relative h-80">
                            <canvas id="typeChart"></canvas>
                        </div>
                    </div>

                    <!-- 学院分布图表 -->
                    <div id="collegeTab" class="stats-content hidden col-span-full bg-white p-6 rounded-xl shadow-card animate-fadeIn">
                        <h3 class="text-lg font-semibold mb-4">各学院活动参与度</h3>
                        <div class="relative h-80">
                            <canvas id="collegeChart"></canvas>
                        </div>
                    </div>

                    <!-- 热门活动图表 -->
                    <div id="popularTab" class="stats-content hidden col-span-full bg-white p-6 rounded-xl shadow-card animate-fadeIn">
                        <h3 class="text-lg font-semibold mb-4">热门活动排行榜</h3>
                        <div class="relative h-80">
                            <canvas id="popularChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 活动列表区域 -->
        <section id="activities" class="py-16 bg-light-1">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-8">
                    <div>
                        <h2 class="text-[clamp(1.5rem,3vw,2.5rem)] font-bold text-dark mb-2">最新活动</h2>
                        <p class="text-dark-2">探索校园内的精彩活动，找到适合你的兴趣和时间的活动</p>
                    </div>
                    <div class="mt-4 md:mt-0">
                        <a href="c_111.html" class="inline-flex items-center text-primary font-medium hover:underline">
                            查看修改活动 <i class="fa fa-arrow-right ml-1"></i>
                        </a>
                    </div>
                </div>

                <!-- 活动卡片列表 -->
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6" id="activityCards">
                    <!-- 活动卡片将通过JS动态生成 -->
                </div>
            </div>
        </section>

        <!-- 关于我们 -->
        <section id="about" class="py-16 bg-white">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-12">
                    <h2 class="text-[clamp(1.5rem,3vw,2.5rem)] font-bold text-dark mb-4">关于我们</h2>
                    <p class="text-dark-2 max-w-2xl mx-auto">校园活动信息平台致力于为师生提供便捷的活动信息服务</p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <div class="bg-light-1 p-6 rounded-xl text-center">
                        <div class="w-16 h-16 bg-primary/10 text-primary rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fa fa-info-circle text-2xl"></i>
                        </div>
                        <h3 class="text-xl font-semibold mb-3">平台简介</h3>
                        <p class="text-dark-2">校园活动信息平台是一个为学校师生提供活动信息发布、查询和参与的综合性平台，旨在丰富校园文化生活。</p>
                    </div>

                    <div class="bg-light-1 p-6 rounded-xl text-center">
                        <div class="w-16 h-16 bg-primary/10 text-primary rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fa fa-users text-2xl"></i>
                        </div>
                        <h3 class="text-xl font-semibold mb-3">我们的使命</h3>
                        <p class="text-dark-2">我们致力于连接校园内的各种活动资源，让每位师生都能轻松发现和参与感兴趣的活动，促进校园交流与合作。</p>
                    </div>

                    <div class="bg-light-1 p-6 rounded-xl text-center">
                        <div class="w-16 h-16 bg-primary/10 text-primary rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fa fa-handshake-o text-2xl"></i>
                        </div>
                        <h3 class="text-xl font-semibold mb-3">联系我们</h3>
                        <p class="text-dark-2">如果您有任何问题或建议，请通过以下方式联系我们：<br>邮箱：contact@campusevents.com<br>电话：010-12345678</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- 页脚 -->
    <footer class="bg-dark text-white py-12">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div>
                    <div class="flex items-center mb-4">
                        <div class="h-10 w-10 rounded-lg bg-primary flex items-center justify-center">
                            <i class="fa fa-graduation-cap text-white text-xl"></i>
                        </div>
                        <span class="ml-2 text-xl font-bold">校园活动信息平台</span>
                    </div>
                    <p class="text-white/70 mb-4">发现精彩校园活动，丰富大学生活</p>
                    <div class="flex space-x-4">
                        <a href="https://wx.qq.com/" class="text-gray-400 hover:text-primary transition-colors" target="_blank">
                            <i class="fa fa-weixin text-xl"></i>
                        </a>
                        <a href="https://weibo.com/newlogin?tabtype=weibo&gid=102803&openLoginLayer=0&url=https%3A%2F%2Fwww.weibo.com%2F" class="text-gray-400 hover:text-primary transition-colors" target="_blank">
                            <i class="fa fa-weibo text-xl"></i>
                        </a>
                        <a href="https://im.qq.com/index/" class="text-white/70 hover:text-white transition-custom" target="_blank">
                            <i class="fa fa-qq text-xl"></i>
                        </a>
                    </div>
                </div>

                <div>
                    <h3 class="text-lg font-semibold mb-4">快速链接</h3>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-white/70 hover:text-white transition-custom">首页</a></li>
                        <li><a href="#statistics" class="text-white/70 hover:text-white transition-custom">数据统计</a></li>
                        <li><a href="#activities" class="text-white/70 hover:text-white transition-custom">活动列表</a></li>
                        <li><a href="#about" class="text-white/70 hover:text-white transition-custom">关于我们</a></li>
                    </ul>
                </div>

                <div>
                    <h3 class="text-lg font-semibold mb-4">支持</h3>
                    <ul class="space-y-2">
                        <li><a class="text-white/70 hover:text-white transition-custom">常见问题</a></li>
                        <li><a class="text-white/70 hover:text-white transition-custom">使用指南</a></li>
                        <li><a class="text-white/70 hover:text-white transition-custom">联系我们</a></li>
                        <li><a class="text-white/70 hover:text-white transition-custom">隐私政策</a></li>
                    </ul>
                </div>

                <div>
                    <h3 class="text-lg font-semibold mb-4">订阅活动通知</h3>
                    <p class="text-white/70 mb-4">输入您的邮箱，获取最新活动信息</p>
                    <div class="flex">
                        <input type="email" placeholder="您的邮箱地址" class="px-4 py-2 rounded-l-lg w-full focus:outline-none text-dark">
                        <button class="bg-primary text-white px-4 py-2 rounded-r-lg hover:bg-primary/90 transition-custom">
                            订阅
                        </button>
                    </div>
                </div>
            </div>

            <div class="border-t border-white/20 mt-12 pt-8 text-center text-white/70">
                <p>&copy; 2025 校园活动信息平台 版权所有</p>
            </div>
        </div>
    </footer>

    <!-- 登录模态框 -->
    <div id="loginModal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-xl shadow-lg w-full max-w-md mx-4 transform transition-all duration-300 scale-95 opacity-0" id="loginModalContent">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-xl font-bold">用户登录</h3>
                    <button id="closeLoginModal" class="text-dark-2 hover:text-dark">
                        <i class="fa fa-times text-xl"></i>
                    </button>
                </div>

                <form id="loginForm">
                    <div class="mb-4">
                        <label for="loginUsername" class="block text-sm font-medium text-dark-2 mb-1">用户名</label>
                        <input type="text" id="loginUsername" class="w-full px-4 py-2 border border-light-2 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary" placeholder="请输入用户名">
                    </div>

                    <div class="mb-6">
                        <label for="loginPassword" class="block text-sm font-medium text-dark-2 mb-1">密码</label>
                        <input type="password" id="loginPassword" class="w-full px-4 py-2 border border-light-2 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary" placeholder="请输入密码">
                    </div>

                    <div class="flex items-center justify-between mb-6">
                        <div class="flex items-center">
                            <input type="checkbox" id="rememberMe" class="mr-2">
                            <label for="rememberMe" class="text-sm text-dark-2">记住密码</label>
                        </div>
                        <a href="#" class="text-sm text-primary hover:underline">忘记密码？</a>
                    </div>

                    <button type="submit" class="w-full py-3 bg-primary text-white rounded-lg font-medium hover:bg-primary/90 transition-custom">
                        登录
                    </button>
                </form>

                <div class="mt-4 text-center">
                    <span class="text-dark-2">还没有账号？</span>
                    <button id="gotoRegisterBtn" class="text-primary hover:underline ml-1">立即注册</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 注册模态框 -->
    <div id="registerModal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-xl shadow-lg w-full max-w-md mx-4 transform transition-all duration-300 scale-95 opacity-0" id="registerModalContent">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-xl font-bold">用户注册</h3>
                    <button id="closeRegisterModal" class="text-dark-2 hover:text-dark">
                        <i class="fa fa-times text-xl"></i>
                    </button>
                </div>

                <form id="registerForm">
                    <div class="mb-4">
                        <label for="registerUsername" class="block text-sm font-medium text-dark-2 mb-1">用户名</label>
                        <input type="text" id="registerUsername" class="w-full px-4 py-2 border border-light-2 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary" placeholder="请输入用户名">
                        <p id="usernameError" class="text-danger text-xs mt-1 hidden">用户名格式不正确</p>
                    </div>

                    <div class="mb-4">
                        <label for="registerPassword" class="block text-sm font-medium text-dark-2 mb-1">密码</label>
                        <input type="password" id="registerPassword" class="w-full px-4 py-2 border border-light-2 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary" placeholder="请输入密码">
                        <p id="passwordError" class="text-danger text-xs mt-1 hidden">密码长度至少8位</p>
                    </div>

                    <div class="mb-6">
                        <label for="registerConfirmPassword" class="block text-sm font-medium text-dark-2 mb-1">确认密码</label>
                        <input type="password" id="registerConfirmPassword" class="w-full px-4 py-2 border border-light-2 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary" placeholder="请再次输入密码">
                        <p id="confirmPasswordError" class="text-danger text-xs mt-1 hidden">两次输入的密码不一致</p>
                    </div>

                    <div class="flex items-center mb-6">
                        <input type="checkbox" id="agreeTerms" class="mr-2">
                        <label for="agreeTerms" class="text-sm text-dark-2">我已阅读并同意<a href="#" class="text-primary hover:underline">用户协议</a></label>
                    </div>

                    <button type="submit" class="w-full py-3 bg-primary text-white rounded-lg font-medium hover:bg-primary/90 transition-custom">
                        注册
                    </button>
                </form>

                <div class="mt-4 text-center">
                    <span class="text-dark-2">已有账号？</span>
                    <button id="gotoLoginBtn" class="text-primary hover:underline ml-1">立即登录</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 模拟活动数据
        const activities = [{
            id: 1,
            title: "人工智能前沿讲座",
            type: "academic",
            date: "2025-06-20",
            time: "14:00-16:00",
            location: "图书馆报告厅",
            organizer: "计算机学院",
            description: "本次讲座将邀请人工智能领域专家分享最新研究成果和应用案例，包括机器学习、自然语言处理和计算机视觉等方向的前沿技术。",
            participants: 128,
            capacity: 200,
            image: "https://picsum.photos/400/300?random=10"
        }, {
            id: 2,
            title: "校园歌手大赛海选",
            type: "culture",
            date: "2025-06-18",
            time: "18:30-21:30",
            location: "大礼堂",
            organizer: "学生会文艺部",
            description: "展现音乐才华，争夺晋级名额！校园歌手大赛海选环节，期待你的精彩表现。",
            participants: 85,
            capacity: 150,
            image: "https://picsum.photos/400/300?random=11"
        }, {
            id: 3,
            title: "环保志愿者活动",
            type: "volunteer",
            date: "2025-06-22",
            time: "09:00-12:00",
            location: "校园周边公园",
            organizer: "环保社团",
            description: "一起参与环保行动，为美丽校园和城市环境贡献一份力量。活动包括垃圾分类宣传和公园清洁。",
            participants: 63,
            capacity: 100,
            image: "https://picsum.photos/400/300?random=12"
        }, {
            id: 4,
            title: "创新创业大赛宣讲会",
            type: "tech",
            date: "2025-06-25",
            time: "15:00-17:00",
            location: "创新创业中心",
            organizer: "教务处",
            description: "了解创新创业大赛详情，获取参赛指导和资源支持。往届获奖团队将分享经验。",
            participants: 92,
            capacity: 150,
            image: "https://picsum.photos/400/300?random=13"
        }, {
            id: 5,
            title: "数学建模竞赛选拔赛",
            type: "competition",
            date: "2025-06-28",
            time: "09:00-17:00",
            location: "理学院机房",
            organizer: "理学院",
            description: "选拔优秀团队参加全国大学生数学建模竞赛，锻炼问题解决和团队协作能力。",
            participants: 45,
            capacity: 60,
            image: "https://picsum.photos/400/300?random=14"
        }, {
            id: 6,
            title: "校园文化节开幕式",
            type: "culture",
            date: "2025-07-01",
            time: "19:00-21:00",
            location: "体育馆",
            organizer: "校团委",
            description: "校园文化节盛大开幕，精彩表演、艺术展览、互动体验等你参与。",
            participants: 210,
            capacity: 500,
            image: "https://picsum.photos/400/300?random=15"
        }];

        // 页面加载完成后执行
        document.addEventListener('DOMContentLoaded', function() {
            // 初始化导航栏滚动效果
            window.addEventListener('scroll', function() {
                const navbar = document.getElementById('navbar');
                if (window.scrollY > 50) {
                    navbar.classList.add('bg-white');
                    navbar.classList.remove('bg-glass');
                } else {
                    navbar.classList.remove('bg-white');
                    navbar.classList.add('bg-glass');
                }
            });

            // 移动端菜单切换
            document.getElementById('mobileMenuBtn').addEventListener('click', function() {
                const mobileMenu = document.getElementById('mobileMenu');
                mobileMenu.classList.toggle('hidden');
            });

            // 数据可视化选项卡切换
            const statsTabs = document.querySelectorAll('.stats-tab');
            statsTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    // 移除所有选项卡的激活状态
                    statsTabs.forEach(t => {
                        t.classList.remove('bg-primary', 'text-white');
                        t.classList.add('bg-light-2', 'text-dark-2');
                    });

                    // 添加当前选项卡的激活状态
                    this.classList.remove('bg-light-2', 'text-dark-2');
                    this.classList.add('bg-primary', 'text-white');

                    // 隐藏所有内容
                    document.querySelectorAll('.stats-content').forEach(content => {
                        content.classList.add('hidden');
                    });

                    // 显示当前选项卡对应的内容
                    const tabId = this.getAttribute('data-tab') + 'Tab';
                    document.getElementById(tabId).classList.remove('hidden');
                });
            });

            // 初始化图表
            initCharts();

            // 渲染活动卡片
            renderActivityCards(activities);

            // 登录/注册模态框相关
            initAuthModals();

            // 检查用户登录状态
            checkLoginStatus();

            // 模拟活动详情页链接
            document.getElementById('exploreBtn').addEventListener('click', function() {
                window.scrollTo({
                    top: document.getElementById('activities').offsetTop - 80,
                    behavior: 'smooth'
                });
            });

            document.getElementById('statsBtn').addEventListener('click', function() {
                window.scrollTo({
                    top: document.getElementById('statistics').offsetTop - 80,
                    behavior: 'smooth'
                });
            });
        });

        // 初始化图表
        function initCharts() {
            // 月度活动趋势图表
            const monthlyCtx = document.getElementById('monthlyChart').getContext('2d');
            new Chart(monthlyCtx, {
                type: 'line',
                data: {
                    labels: ['1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月', '9月', '10月', '11月', '12月'],
                    datasets: [{
                        label: '活动数量',
                        data: [12, 19, 15, 22, 28, 35, 18, 10, 25, 30, 32, 38],
                        borderColor: '#165DFF',
                        backgroundColor: 'rgba(22, 93, 255, 0.1)',
                        tension: 0.3,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            mode: 'index',
                            intersect: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: 'rgba(0, 0, 0, 0.05)'
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            }
                        }
                    }
                }
            });

            // 活动类型分布图表
            const typeCtx = document.getElementById('typeChart').getContext('2d');
            new Chart(typeCtx, {
                type: 'doughnut',
                data: {
                    labels: ['学术讲座', '文体活动', '志愿公益', '科技创新', '社团活动', '竞赛比赛'],
                    datasets: [{
                        data: [30, 25, 15, 12, 10, 8],
                        backgroundColor: [
                            '#165DFF',
                            '#36BFFA',
                            '#FF7D00',
                            '#00B42A',
                            '#F7BA1E',
                            '#F53F3F'
                        ],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'right'
                        }
                    },
                    cutout: '65%'
                }
            });

            // 学院分布图表
            const collegeCtx = document.getElementById('collegeChart').getContext('2d');
            new Chart(collegeCtx, {
                type: 'bar',
                data: {
                    labels: ['计算机学院', '商学院', '艺术学院', '理学院', '工学院', '文学院', '外语学院'],
                    datasets: [{
                        label: '活动参与度',
                        data: [85, 72, 68, 75, 60, 55, 62],
                        backgroundColor: '#36BFFA',
                        borderRadius: 6
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            grid: {
                                color: 'rgba(0, 0, 0, 0.05)'
                            },
                            ticks: {
                                callback: function(value) {
                                    return value + '%';
                                }
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            }
                        }
                    }
                }
            });

            // 热门活动图表
            const popularCtx = document.getElementById('popularChart').getContext('2d');
            new Chart(popularCtx, {
                type: 'bar',
                data: {
                    labels: ['校园文化节开幕式', '创新创业大赛宣讲会', '人工智能前沿讲座', '数学建模竞赛选拔赛', '环保志愿者活动'],
                    datasets: [{
                        label: '参与人数',
                        data: [210, 92, 128, 45, 63],
                        backgroundColor: '#165DFF',
                        borderRadius: 6
                    }]
                },
                options: {
                    indexAxis: 'y', // 水平条形图
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        x: {
                            beginAtZero: true,
                            grid: {
                                color: 'rgba(0, 0, 0, 0.05)'
                            }
                        },
                        y: {
                            grid: {
                                display: false
                            }
                        }
                    }
                }
            });
        }

        // 渲染活动卡片
        function renderActivityCards(activities) {
            const container = document.getElementById('activityCards');
            container.innerHTML = '';

            activities.forEach(activity => {
                const card = document.createElement('div');
                card.className = 'bg-white rounded-xl overflow-hidden shadow-card hover:shadow-hover transition-custom';

                const typeClass = activity.type === 'academic' ? 'bg-primary/10 text-primary' :
                    activity.type === 'culture' ? 'bg-secondary/10 text-secondary' :
                    activity.type === 'volunteer' ? 'bg-success/10 text-success' :
                    activity.type === 'tech' ? 'bg-accent/10 text-accent' : 'bg-warning/10 text-warning';

                const typeText = activity.type === 'academic' ? '学术讲座' :
                    activity.type === 'culture' ? '文体活动' :
                    activity.type === 'volunteer' ? '志愿公益' :
                    activity.type === 'tech' ? '科技创新' : '竞赛比赛';

                card.innerHTML = `
                    <div class="relative">
                        <img src="${activity.image}" alt="${activity.title}" class="w-full h-48 object-cover">
                        <div class="absolute top-3 left-3 ${typeClass} px-2 py-1 rounded-full text-xs font-medium">
                            ${typeText}
                        </div>
                    </div>
                    <div class="p-5">
                        <div class="flex justify-between items-center mb-2">
                            <span class="text-sm text-dark-2"><i class="fa fa-calendar mr-1"></i> ${activity.date}</span>
                            <span class="text-sm text-dark-2"><i class="fa fa-clock-o mr-1"></i> ${activity.time}</span>
                        </div>
                        <h3 class="text-lg font-semibold mb-2 line-clamp-1">${activity.title}</h3>
                        <p class="text-dark-2 text-sm mb-4 line-clamp-2">${activity.description}</p>
                        <div class="flex justify-between items-center">
                            <div class="flex items-center">
                                <span class="text-xs bg-light-1 px-2 py-1 rounded-full text-dark-2 mr-2">
                                    <i class="fa fa-user-o mr-1"></i> ${activity.participants}/${activity.capacity}
                                </span>
                                <span class="text-xs bg-light-1 px-2 py-1 rounded-full text-dark-2">
                                    <i class="fa fa-map-marker mr-1"></i> ${activity.location}
                                </span>
                    </div>
                `;

                container.appendChild(card);
            });
        }

        // 查看活动详情
        function viewActivityDetail(id) {
            // 保存活动ID到localStorage
            localStorage.setItem('selectedActivityId', id);

            // 跳转到活动详情页
            window.location.href = 'activity-detail.html';
        }

        // 初始化登录/注册模态框
        function initAuthModals() {
            // 登录模态框
            const loginModal = document.getElementById('loginModal');
            const loginModalContent = document.getElementById('loginModalContent');
            const loginBtn = document.getElementById('loginBtn');
            const closeLoginModal = document.getElementById('closeLoginModal');

            loginBtn.addEventListener('click', function() {
                loginModal.classList.remove('hidden');
                setTimeout(() => {
                    loginModalContent.classList.remove('scale-95', 'opacity-0');
                    loginModalContent.classList.add('scale-100', 'opacity-100');
                }, 10);
            });

            closeLoginModal.addEventListener('click', function() {
                loginModalContent.classList.remove('scale-100', 'opacity-100');
                loginModalContent.classList.add('scale-95', 'opacity-0');
                setTimeout(() => {
                    loginModal.classList.add('hidden');
                }, 300);
            });

            // 注册模态框
            const registerModal = document.getElementById('registerModal');
            const registerModalContent = document.getElementById('registerModalContent');
            const registerBtn = document.getElementById('registerBtn');
            const closeRegisterModal = document.getElementById('closeRegisterModal');

            registerBtn.addEventListener('click', function() {
                registerModal.classList.remove('hidden');
                setTimeout(() => {
                    registerModalContent.classList.remove('scale-95', 'opacity-0');
                    registerModalContent.classList.add('scale-100', 'opacity-100');
                }, 10);
            });

            closeRegisterModal.addEventListener('click', function() {
                registerModalContent.classList.remove('scale-100', 'opacity-100');
                registerModalContent.classList.add('scale-95', 'opacity-0');
                setTimeout(() => {
                    registerModal.classList.add('hidden');
                }, 300);
            });

            // 模态框切换
            document.getElementById('gotoRegisterBtn').addEventListener('click', function() {
                loginModalContent.classList.remove('scale-100', 'opacity-100');
                loginModalContent.classList.add('scale-95', 'opacity-0');
                setTimeout(() => {
                    loginModal.classList.add('hidden');
                    registerModal.classList.remove('hidden');
                    setTimeout(() => {
                        registerModalContent.classList.remove('scale-95', 'opacity-0');
                        registerModalContent.classList.add('scale-100', 'opacity-100');
                    }, 10);
                }, 300);
            });

            document.getElementById('gotoLoginBtn').addEventListener('click', function() {
                registerModalContent.classList.remove('scale-100', 'opacity-100');
                registerModalContent.classList.add('scale-95', 'opacity-0');
                setTimeout(() => {
                    registerModal.classList.add('hidden');
                    loginModal.classList.remove('hidden');
                    setTimeout(() => {
                        loginModalContent.classList.remove('scale-95', 'opacity-0');
                        loginModalContent.classList.add('scale-100', 'opacity-100');
                    }, 10);
                }, 300);
            });

            // 点击模态框外部关闭
            loginModal.addEventListener('click', function(e) {
                if (e.target === loginModal) {
                    loginModalContent.classList.remove('scale-100', 'opacity-100');
                    loginModalContent.classList.add('scale-95', 'opacity-0');
                    setTimeout(() => {
                        loginModal.classList.add('hidden');
                    }, 300);
                }
            });

            registerModal.addEventListener('click', function(e) {
                if (e.target === registerModal) {
                    x
                    registerModalContent.classList.remove('scale-100', 'opacity-100');
                    registerModalContent.classList.add('scale-95', 'opacity-0');
                    setTimeout(() => {
                        registerModal.classList.add('hidden');
                    }, 300);
                }
            });

            // 注册表单验证
            const registerForm = document.getElementById('registerForm');
            registerForm.addEventListener('submit', function(e) {
                e.preventDefault();

                const username = document.getElementById('registerUsername').value;
                const password = document.getElementById('registerPassword').value;
                const confirmPassword = document.getElementById('registerConfirmPassword').value;
                const agreeTerms = document.getElementById('agreeTerms').checked;

                let isValid = true;

                // 用户名验证
                const usernameRegex = /^[a-zA-Z0-9]{4,20}$/;
                if (!usernameRegex.test(username)) {
                    document.getElementById('usernameError').classList.remove('hidden');
                    isValid = false;
                } else {
                    document.getElementById('usernameError').classList.add('hidden');
                }

                // 密码验证
                if (password.length < 8) {
                    document.getElementById('passwordError').classList.remove('hidden');
                    isValid = false;
                } else {
                    document.getElementById('passwordError').classList.add('hidden');
                }

                // 确认密码验证
                if (password !== confirmPassword) {
                    document.getElementById('confirmPasswordError').classList.remove('hidden');
                    isValid = false;
                } else {
                    document.getElementById('confirmPasswordError').classList.add('hidden');
                }

                // 用户协议验证
                if (!agreeTerms) {
                    alert('请同意用户协议');
                    isValid = false;
                }

                if (isValid) {
                    // 保存用户信息到localStorage
                    const users = JSON.parse(localStorage.getItem('users')) || [];

                    // 检查用户名是否已存在
                    const existingUser = users.find(u => u.username === username);
                    if (existingUser) {
                        alert('用户名已存在，请选择其他用户名');
                        return;
                    }

                    const newUser = {
                        username,
                        password,
                        registeredAt: new Date().toISOString(),
                        avatar: `https://picsum.photos/40/40?random=${users.length + 1}`
                    };

                    users.push(newUser);
                    localStorage.setItem('users', JSON.stringify(users));

                    alert('注册成功，请登录');

                    // 关闭注册模态框，打开登录模态框
                    registerModalContent.classList.remove('scale-100', 'opacity-100');
                    registerModalContent.classList.add('scale-95', 'opacity-0');
                    setTimeout(() => {
                        registerModal.classList.add('hidden');
                        loginModal.classList.remove('hidden');
                        setTimeout(() => {
                            loginModalContent.classList.remove('scale-95', 'opacity-0');
                            loginModalContent.classList.add('scale-100', 'opacity-100');
                        }, 10);
                    }, 300);
                }
            });

            // 登录表单验证
            const loginForm = document.getElementById('loginForm');
            loginForm.addEventListener('submit', function(e) {
                e.preventDefault();

                const username = document.getElementById('loginUsername').value;
                const password = document.getElementById('loginPassword').value;
                const rememberMe = document.getElementById('rememberMe').checked;

                const users = JSON.parse(localStorage.getItem('users')) || [];
                const user = users.find(u => u.username === username && u.password === password);

                if (user) {
                    // 登录成功
                    localStorage.setItem('currentUser', JSON.stringify({
                        username: user.username,
                        avatar: user.avatar,
                        loginTime: new Date().toISOString()
                    }));

                    // 如果选择了记住密码，保存用户名和密码
                    if (rememberMe) {
                        localStorage.setItem('rememberedUser', JSON.stringify({
                            username,
                            password
                        }));
                    } else {
                        localStorage.removeItem('rememberedUser');
                    }

                    // 记录用户登录行为
                    recordUserAction('login');

                    // 更新UI
                    checkLoginStatus();

                    // 关闭登录模态框
                    loginModalContent.classList.remove('scale-100', 'opacity-100');
                    loginModalContent.classList.add('scale-95', 'opacity-0');
                    setTimeout(() => {
                        loginModal.classList.add('hidden');
                        alert('登录成功！');
                    }, 300);
                } else {
                    alert('用户名或密码错误');
                }
            });

            // 检查是否有记住的用户
            const rememberedUser = JSON.parse(localStorage.getItem('rememberedUser'));
            if (rememberedUser) {
                document.getElementById('loginUsername').value = rememberedUser.username;
                document.getElementById('loginPassword').value = rememberedUser.password;
                document.getElementById('rememberMe').checked = true;
            }
        }

        // 检查用户登录状态
        function checkLoginStatus() {
            const currentUser = JSON.parse(localStorage.getItem('currentUser'));
            const notLoggedIn = document.getElementById('notLoggedIn');
            const loggedIn = document.getElementById('loggedIn');
            const userName = document.getElementById('userName');
            const userAvatar = document.getElementById('userAvatar');

            if (currentUser) {
                // 用户已登录
                notLoggedIn.classList.add('hidden');
                loggedIn.classList.remove('hidden');
                userName.textContent = currentUser.username;
                userAvatar.src = currentUser.avatar;

                // 用户菜单交互
                const userMenuBtn = document.getElementById('userMenuBtn');
                const userDropdown = document.getElementById('userDropdown');

                userMenuBtn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    userDropdown.classList.toggle('invisible');
                    userDropdown.classList.toggle('opacity-0');
                    userDropdown.classList.toggle('scale-95');
                    userDropdown.classList.toggle('scale-100');
                    userDropdown.classList.toggle('opacity-100');
                });

                // 点击页面其他地方关闭下拉菜单
                document.addEventListener('click', function() {
                    if (!userDropdown.classList.contains('invisible')) {
                        userDropdown.classList.add('invisible');
                        userDropdown.classList.add('opacity-0');
                        userDropdown.classList.add('scale-95');
                        userDropdown.classList.remove('scale-100');
                        userDropdown.classList.remove('opacity-100');
                    }
                });

                // 退出登录
                document.getElementById('logoutBtn').addEventListener('click', function(e) {
                    e.preventDefault();
                    localStorage.removeItem('currentUser');
                    notLoggedIn.classList.remove('hidden');
                    loggedIn.classList.add('hidden');

                    // 记录用户登出行为
                    recordUserAction('logout');

                    alert('已成功退出登录');
                });
            } else {
                // 用户未登录
                notLoggedIn.classList.remove('hidden');
                loggedIn.classList.add('hidden');
            }
        }

        // 记录用户行为
        function recordUserAction(action) {
            const currentUser = JSON.parse(localStorage.getItem('currentUser'));
            if (!currentUser) return;

            const userActions = JSON.parse(localStorage.getItem('userActions')) || [];
            userActions.push({
                username: currentUser.username,
                action,
                timestamp: new Date().toISOString()
            });

            // 限制记录数量为100条
            if (userActions.length > 100) {
                userActions.shift();
            }

            localStorage.setItem('userActions', JSON.stringify(userActions));
        }
    </script>
</body>

</html>
